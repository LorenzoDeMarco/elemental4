[gd_scene load_steps=3 format=2]

[ext_resource path="res://fonts/presets/Heading2.tres" type="DynamicFont" id=1]

[sub_resource type="GDScript" id=12]
script/source = "extends Control

# Live Feed controller

func _ready():
	var tot_elems: int = ElementDB.get_db_size()
	var fake_time : float = 0
	for i in range(12):
		fake_time += i + (randf() * i) + randi() % 6
		var user: String = [\"FBar\", \"_xX_jdoe_Xx_\", \"tumw15\", \"4lph4game\", \"ledomSoft\"][randi() % 5]
		
		var fe = preload(\"res://prefabs/ui/LiveFeedRecord.tscn\").instance()
		
		var is_elem: bool = randi() % 2 == 0
		if is_elem:
			var ix: int = randi() % tot_elems
			var mdl: ElementModel = ElementDB.element_model_by_index(ix)
			fe.element_id = mdl.id
			fe.title = user + \" discovered '\" + mdl.name + \"'!\"
		else:
			var game: String = [\"Showdown!\", \"Time Bomb\", \"Master Collector\"][randi() % 3]
			fe.title = user + \" won a \" + game + \" match!\"
		fe.subtitle = str(int(fake_time)) + \" minutes ago\"
		if fe.title.length() > 36:
			fe.title = fe.title.substr(0, 33) + \"...\"
		$ScrollContainer/VBoxContainer.add_child(fe)
"

[node name="LiveFeed" type="Control"]
anchor_bottom = 1.0
margin_right = 344.0
script = SubResource( 12 )
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="LiveFeedLbl" type="Label" parent="."]
margin_left = 16.0
margin_top = 7.0
margin_right = 256.0
margin_bottom = 46.0
custom_fonts/font = ExtResource( 1 )
text = "Live feed"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ScrollContainer" type="ScrollContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 16.0
margin_top = 55.0
margin_right = -16.0
margin_bottom = -16.0
scroll_horizontal_enabled = false
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="ScrollContainer"]
alignment = 1
